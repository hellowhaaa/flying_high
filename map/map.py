import folium
from folium.plugins import MarkerCluster
from folium import features

taoyuan_airport_coords = [25.080, 121.2325]

destinations = {
    '(布里斯本)': [22.66651495, 120.31366413016224], '上海/浦東': [31.2217826, 121.5387401], '亞庇': [5.9780066, 116.0728988], 
    '仁川': [37.456, 126.7052], '仙台': [38.2597492, 140.8798618], '仰光': [16.7967129, 96.1609916], '伊斯坦堡': [41.006381, 28.9758715], 
    '休士頓': [29.7589382, -95.3676974], '佐賀': [33.2640571, 130.2974097], '倫敦': [51.5074456, -0.1277653], 
    '克拉克': [28.3323055, 102.3516198], '公主港': [1.4240029, 103.66238724433693], '函館': [41.7737872, 140.7261884], 
    '北京': [40.190632, 116.412144], '南京': [32.0438284, 118.7788631], '卡堤克蘭': [-0.83170875, 37.00492162779861], 
    '吉隆坡': [3.1516964, 101.6942371], '名古屋': [35.1715775, 136.8836728], '墨爾本': [-37.8142454, 144.9631732], 
    '多倫多': [43.6534817, -79.3839347], '大邱': [35.8713, 128.6018], '大阪/關西': [34.7004273, 135.5462518], 
    '奧克蘭': [-36.852095, 174.7631803], '安大略': [50.000678, -86.000977], '宿霧': [10.47, 123.83], '富國島': [22.6627466, 120.34971151344902], 
    '富山': [36.7020984, 137.2126608], '寧波': [29.8622194, 121.6203873], '小松': [36.4018391, 136.4528145], '岡山': [34.6654089, 133.917825], 
    '峇里島': [22.7277177, 120.29994671624216], '峴港': [16.068, 108.212], '巴黎': [48.8534951, 2.3483915], '布拉格': [50.0874654, 14.4212535], 
    '布里斯本': [22.66651495, 120.31366413016224], '帛琉': [5.3783537, 132.9102573], '廈門': [24.4801069, 118.0853479], 
    '廣島': [34.3980242, 132.476095], '廣州': [23.1301964, 113.2592945], '慕尼黑': [48.1371079, 11.5753822], '成都/天府': [30.685735, 103.794594],
    '新加坡': [1.2899175, 103.8519072], '新潟': [37.9122444, 139.0613294], '曼谷 廊曼': [24.4477852, 118.0684726], 
    '札幌': [43.0686365, 141.3509218], '杭州': [30.2489634, 120.2052342], '東京': [35.6821936, 139.762221], 
    '松山': [33.8403352, 132.751077], '檳城': [37.4311343, 118.0136196], '武漢': [30.5951051, 114.2999353], '汶萊': [4.4137155, 114.5653908], 
    '河內': [34.4691853, 132.8899558], '法蘭克福': [50.1106444, 8.6820917], '洛杉磯': [34.0536909, -118.242766], '深圳': [22.5445741, 114.0545429],
    '清州': [38.5746589, 116.8260491], '清邁': [18.7882778, 98.9858802], '溫哥華': [49.2608724, -123.113952], '澳門': [22.1899448, 113.5380454],
    '濟州': [33.4887737, 126.4987083], '熊本': [32.7903435, 130.6888842], '福岡': [36.7080711, 136.9317779], 
    '福島': [37.75454, 140.4592144], '福州': [21.9842196, 111.2062957], '秋田': [39.7168833, 140.1296657], '米蘭': [45.4641943, 9.1896346],
    '紐約': [40.7127281, -74.0060152], '維也納': [48.2083537, 16.3725042], '羅馬': [41.8933203, 12.4829321], '羽田': [35.5479444, 139.7466458],
    '胡志明市': [10.7763897, 106.7011391], '舊金山': [37.7792588, -122.4193286], '芝加哥': [41.8755616, -87.6244212], '花卷': [39.3931976, 141.1107252], 
    '茨城': [29.9777203, 121.4454192], '西雅圖': [47.6038321, -122.330062], '鄭州': [34.7533392, 113.6599983], '重慶': [30.05518, 107.8748712],
    '金邊': [11.568271, 104.9224426], '釜山': [35.1799528, 129.0752365], '阿姆斯特丹': [52.3730796, 4.8924534], '雅加達': [-6.175247, 106.8270488],
    '雪梨': [-33.8698439, 151.2082848], '青島': [36.0637967, 120.3192081], '香港': [22.350627, 114.1849161], '馬尼拉': [14.5906346, 120.9799964],
    '高松': [34.350692, 134.0461528], '高知': [33.5671776, 133.5436574]}

depart_destination = {
    '(布里斯本)': [22.66651495, 120.31366413016224], '上海/浦東': [31.2217826, 121.5387401], '亞庇': [5.9780066, 116.0728988], 
    '仁川': [37.456, 126.7052], '仙台': [38.2597492, 140.8798618], '仰光': [16.7967129, 96.1609916], '伊斯坦堡': [41.006381, 28.9758715], 
    '休士頓': [29.7589382, -95.3676974], '佐賀': [33.2640571, 130.2974097], '倫敦': [51.5074456, -0.1277653], 
    '克拉克': [28.3323055, 102.3516198], '公主港': [1.4240029, 103.66238724433693], '函館': [41.7737872, 140.7261884], 
    '北京': [40.190632, 116.412144], '南京': [32.0438284, 118.7788631], '卡堤克蘭': [-0.83170875, 37.00492162779861], 
    '吉隆坡': [3.1516964, 101.6942371], '名古屋': [35.1715775, 136.8836728], '墨爾本': [-37.8142454, 144.9631732], 
    '多倫多': [43.6534817, -79.3839347], '大邱': [35.8713, 128.6018], '大阪/關西': [34.7004273, 135.5462518], 
    '奧克蘭': [-36.852095, 174.7631803], '安大略': [50.000678, -86.000977], '宿霧': [10.47, 123.83], '富國島': [22.6627466, 120.34971151344902], 
    '富山': [36.7020984, 137.2126608], '寧波': [29.8622194, 121.6203873], '小松': [36.4018391, 136.4528145], '岡山': [34.6654089, 133.917825], 
    '峇里島': [22.7277177, 120.29994671624216], '峴港': [16.068, 108.212], '巴黎': [48.8534951, 2.3483915], '布拉格': [50.0874654, 14.4212535], 
    '布里斯本': [22.66651495, 120.31366413016224], '帛琉': [5.3783537, 132.9102573], '廈門': [24.4801069, 118.0853479], 
    '廣島': [34.3980242, 132.476095], '廣州': [23.1301964, 113.2592945], '慕尼黑': [48.1371079, 11.5753822], '成都/天府': [30.685735, 103.794594],
    '新加坡': [1.2899175, 103.8519072], '新潟': [37.9122444, 139.0613294], '曼谷 廊曼': [24.4477852, 118.0684726], 
    '札幌': [43.0686365, 141.3509218], '杭州': [30.2489634, 120.2052342], '東京': [35.6821936, 139.762221], 
    '松山': [33.8403352, 132.751077], '檳城': [37.4311343, 118.0136196], '武漢': [30.5951051, 114.2999353], '汶萊': [4.4137155, 114.5653908], 
    '河內': [34.4691853, 132.8899558], '法蘭克福': [50.1106444, 8.6820917], '洛杉磯': [34.0536909, -118.242766], '深圳': [22.5445741, 114.0545429],
    '清州': [38.5746589, 116.8260491], '清邁': [18.7882778, 98.9858802], '溫哥華': [49.2608724, -123.113952], '澳門': [22.1899448, 113.5380454],
    '濟州': [33.4887737, 126.4987083], '熊本': [32.7903435, 130.6888842], '福岡': [36.7080711, 136.9317779], 
    '福島': [37.75454, 140.4592144], '福州': [21.9842196, 111.2062957], '秋田': [39.7168833, 140.1296657], '米蘭': [45.4641943, 9.1896346],
    '紐約': [40.7127281, -74.0060152], '維也納': [48.2083537, 16.3725042], '羅馬': [41.8933203, 12.4829321], '羽田': [35.5479444, 139.7466458],
    '胡志明市': [10.7763897, 106.7011391], '舊金山': [37.7792588, -122.4193286], '芝加哥': [41.8755616, -87.6244212], '花卷': [39.3931976, 141.1107252], 
    '茨城': [29.9777203, 121.4454192], '西雅圖': [47.6038321, -122.330062], '鄭州': [34.7533392, 113.6599983], '重慶': [30.05518, 107.8748712],
    '金邊': [11.568271, 104.9224426], '釜山': [35.1799528, 129.0752365], '阿姆斯特丹': [52.3730796, 4.8924534], '雅加達': [-6.175247, 106.8270488],
    '雪梨': [-33.8698439, 151.2082848], '青島': [36.0637967, 120.3192081], '香港': [22.350627, 114.1849161], '馬尼拉': [14.5906346, 120.9799964],
    '高松': [34.350692, 134.0461528], '高知': [33.5671776, 133.5436574]}


map = folium.Map(location=taoyuan_airport_coords, zoom_start=5, tiles='cartodbpositron')

# 创建不同的FeatureGroup
arrivals = folium.FeatureGroup(name='Arrivals to Taoyuan')
departures = folium.FeatureGroup(name='Departures from Taoyuan')

# Marker 
folium.Marker(
    taoyuan_airport_coords,
    popup='桃園國際機場',
    icon=folium.Icon(color='red', icon='plane')
).add_to(map)

# Arrive
for city, coords in destinations.items():
    folium.Marker(
        coords,
        popup=f'Arrival to {city}',
        icon=folium.Icon(color='green', icon='plane-arrival')
    ).add_to(arrivals)
    
    folium.PolyLine([taoyuan_airport_coords, coords], color="green").add_to(arrivals)

# Depart
for city, coords in depart_destination.items():
    folium.Marker(
        coords,
        popup=f'Departure from {city}',
        icon=folium.Icon(color='blue', icon='plane-departure')
    ).add_to(departures)
    
    folium.PolyLine([coords, taoyuan_airport_coords], color="blue").add_to(departures)

# add  FeatureGroup to map
map.add_child(arrivals)ß
map.add_child(departures)

# add LayerControl
map.add_child(folium.LayerControl())

style_function = """
    function(feature) {
        return {color: feature.properties.color};
    };
"""
highlight_function = """
    function(feature) {
        return {weight: 10, color: 'red'};
    };
"""

map.get_root().html.add_child(folium.Element("""
    <style>
    .leaflet-interactive:hover {
        stroke-width: 10px;
        stroke-color: #red !important;
    }
    </style>
"""))

map.save('map_with_layers2.html')

