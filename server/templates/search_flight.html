{% extends "layout.html" %} {% block css_search_flight %}

<link rel="stylesheet" href="../static/css/style_search_flight.css" />
{% endblock %} {% block homepage %}

<script
  src="https://code.jquery.com/jquery-2.1.1.min.js"
  type="text/javascript"
></script>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css"
  rel="stylesheet"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>

<script type="text/javascript">
  $(document).ready(function () {
    fetch("/fetch_depart_flight_code")
      .then((response) => response.json())
      .then((data) => {
        $("#depart_airlines").select2({
          data: Object.keys(data).map((key) => ({ id: key, text: key })),
        });

        $("#depart_airlines").on("change", function () {
          var selectedAirline = $(this).val();
          var flightCodes = data[selectedAirline] || [];
          $("#depart_flightCodes")
            .empty()
            .select2({
              data: flightCodes.map((code) => ({ id: code, text: code })),
            });
        });
      })
      .catch((error) =>
        console.error("Error fetching the airline data:", error)
      );
  });
</script>

<script type="text/javascript">
  $(document).ready(function () {
    fetch("/fetch_arrive_flight_code")
      .then((response) => response.json())
      .then((data) => {
        $("#arrive_airlines").select2({
          data: Object.keys(data).map((key) => ({ id: key, text: key })),
        });

        $("#arrive_airlines").on("change", function () {
          var selectedAirline = $(this).val();
          var flightCodes = data[selectedAirline] || [];
          $("#arrive_flightCodes")
            .empty()
            .select2({
              data: flightCodes.map((code) => ({ id: code, text: code })),
            });
        });
      })
      .catch((error) =>
        console.error("Error fetching the airline data:", error)
      );
  });
</script>

{% endblock %} {% block content %}

<!-- <div class="background-image"></div> -->

<img
  src="{{ url_for('static', filename='images/airplane.jpg') }}"
  alt="Signup"
  class="img-airplane"
/>

<!--  選項 －－－－－ -->
<div class="my-3">
  <form action="/arrive_flight_time" method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    <div class="container-lg .bg-primary-subtle text-white">
      Flight <span id="emphasize">Arrive </span>at Taoyuan Airport Today

      <div class="input-group mb-3">
        <select
          class="form-select"
          id="arrive_airlines"
          name="airline"
        ></select>
      </div>

      <div class="form-group mb-3">
        <select
          id="arrive_flightCodes"
          style="width: 300px"
          name="flight_number"
        >
          <!-- Dropdown List Option -->
        </select>
      </div>

      <button
        type="submit"
        class="btn btn-secondary"
        name="search"
        value="depart"
      >
        Search
      </button>
    </div>
  </form>
</div>
<div class="space"></div>
<div class="my-3">
  <form action="/depart_flight_time" method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    <!-- 這遍 -->
    <div class="container-lg .bg-primary-subtle text-white">
      Flight
      <span id="emphasize">Depart</span>
      from Taoyuan Airport Today
      <div class="input-group mb-3">
        <select
          class="form-select"
          id="depart_airlines"
          name="airline"
        ></select>
      </div>

      <div class="form-group mb-3">
        <label for="depart_flightCodes" class="form-label">Flight Number</label>
        <select
          class="form-control"
          id="depart_flightCodes"
          style="width: 100%"
          name="flight_number"
        ></select>
      </div>

      <button
        type="submit"
        class="btn btn-secondary"
        name="search"
        value="arrive"
      >
        Search
      </button>
    </div>
  </form>
</div>

{% endblock %} {% block scripts %}
<!-- 特定頁面的 JavaScript -->
{% endblock %}
